<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Student Record</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #3a86ff;
            --primary-light: #d7e3ff;
            --secondary-color: #4361ee;
            --success-color: #38b000;
            --success-light: #e3f8e2;
            --danger-color: #ff006e;
            --danger-light: #ffe0ef;
            --gray-100: #f8f9fa;
            --gray-200: #e9ecef;
            --gray-300: #dee2e6;
            --gray-600: #6c757d;
            --gray-800: #343a40;
            --border-radius: 8px;
            --box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
            --transition: all 0.2s ease;
        }
        
        body {
            background-color: #f9fafc;
            font-family: 'Inter', sans-serif;
            color: var(--gray-800);
            line-height: 1.6;
        }
        
        .app-container {
            max-width: 1280px;
            margin: 1.5rem auto;
            padding: 0 1rem;
        }
        
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            padding: 1rem 0;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo-icon {
            color: var(--primary-color);
            font-size: 1.75rem;
            margin-right: 0.75rem;
        }
        
        .page-title {
            font-weight: 700;
            color: var(--gray-800);
            margin: 0;
            font-size: 1.5rem;
        }
        
        .card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            border: none;
            margin-bottom: 1.5rem;
            transition: var(--transition);
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid var(--gray-200);
            font-weight: 600;
            font-size: 1rem;
            padding: 1rem 1.25rem;
            display: flex;
            align-items: center;
        }
        
        .card-header-icon {
            margin-right: 0.75rem;
            color: var(--primary-color);
        }
        
        .card-body {
            padding: 1.25rem;
        }
        
        .form-label {
            font-weight: 500;
            color: var(--gray-800);
            font-size: 0.875rem;
            margin-bottom: 0.5rem;
        }
        
        .form-select, .form-control {
            border-radius: var(--border-radius);
            padding: 0.625rem 0.875rem;
            border: 1px solid var(--gray-300);
            font-size: 0.9375rem;
            transition: var(--transition);
        }
        
        .form-select:focus, .form-control:focus {
            box-shadow: 0 0 0 3px rgba(58, 134, 255, 0.15);
            border-color: var(--primary-color);
        }
        
        .filter-container {
            background-color: var(--gray-100);
            border-radius: var(--border-radius);
            padding: 1.25rem;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
            margin: 0.5rem 0 1rem;
        }
        
        .attendance-summary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .attendance-card {
            padding: 1.25rem;
            border-radius: var(--border-radius);
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }
        
        .attendance-card h3 {
            font-size: 2rem;
            font-weight: 700;
            margin: 0.5rem 0;
            line-height: 1;
        }
        
        .attendance-card p {
            font-size: 0.875rem;
            margin-bottom: 0;
            opacity: 0.8;
        }
        
        .present-card {
            background-color: var(--success-light);
        }
        
        .present-card h3, .present-card i {
            color: var(--success-color);
        }
        
        .absent-card {
            background-color: var(--danger-light);
        }
        
        .absent-card h3, .absent-card i {
            color: var(--danger-color);
        }
        
        .present-badge {
            background-color: var(--success-light);
            color: var(--success-color);
            font-weight: 600;
            font-size: 0.75rem;
            padding: 0.375rem 0.75rem;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
        }
        
        .absent-badge {
            background-color: var(--danger-light);
            color: var(--danger-color);
            font-weight: 600;
            font-size: 0.75rem;
            padding: 0.375rem 0.75rem;
            border-radius: 20px;
            display: inline-flex;
            align-items: center;
        }
        
        .badge-icon {
            margin-right: 0.375rem;
            font-size: 0.75rem;
        }
        
        .table {
            width: 100%;
            margin-bottom: 0;
        }
        
        .table th {
            background-color: var(--gray-100);
            color: var(--gray-600);
            font-weight: 600;
            font-size: 0.8125rem;
            padding: 0.75rem 1rem;
            text-transform: uppercase;
            letter-spacing: 0.03em;
        }
        
        .table td {
            padding: 1rem;
            vertical-align: middle;
            font-size: 0.9375rem;
        }
        
        .student-name {
            display: flex;
            align-items: center;
            font-weight: 500;
        }
        
        .student-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background-color: var(--primary-light);
            color: var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
            margin-right: 0.75rem;
        }
        
        .btn-primary {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            border-radius: var(--border-radius);
            padding: 0.625rem 1.25rem;
            font-weight: 500;
            font-size: 0.9375rem;
            transition: var(--transition);
        }
        
        .btn-primary:hover {
            background-color: var(--secondary-color);
            border-color: var(--secondary-color);
            transform: translateY(-1px);
        }
        
        .btn-outline-primary {
            color: var(--primary-color);
            border-color: var(--primary-color);
            border-radius: var(--border-radius);
            padding: 0.625rem 1.25rem;
            font-weight: 500;
            font-size: 0.9375rem;
            transition: var(--transition);
        }
        
        .btn-outline-primary:hover {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }
        
        .btn-sm {
            padding: 0.375rem 0.75rem;
            font-size: 0.8125rem;
        }
        
        .chart-actions {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }
        
        .attendance-stats {
            background-color: var(--gray-100);
            border-radius: var(--border-radius);
            padding: 1rem;
            font-size: 0.875rem;
        }
        
        .progress {
            height: 8px;
            border-radius: 4px;
            background-color: var(--gray-200);
        }
        
        .progress-bar {
            background-color: var(--success-color);
        }
        
        .footer {
            text-align: center;
            margin-top: 2rem;
            padding: 1rem 0;
            border-top: 1px solid var(--gray-200);
            font-size: 0.8125rem;
            color: var(--gray-600);
        }
        
        .pagination {
            margin-bottom: 0;
        }
        
        .page-link {
            border-radius: 4px;
            margin: 0 2px;
            color: var(--gray-800);
            border-color: var(--gray-300);
            font-size: 0.875rem;
            padding: 0.375rem 0.75rem;
        }
        
        .page-item.active .page-link {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }
        
        .text-muted {
            color: var(--gray-600) !important;
            font-size: 0.8125rem;
        }
        
        .search-container {
            position: relative;
            max-width: 250px;
        }
        
        .search-container .input-group-text {
            background-color: transparent;
            border-right: none;
            color: var(--gray-600);
        }
        
        .search-container .form-control {
            border-left: none;
            padding-left: 0;
        }
        
        .search-container .form-control:focus + .input-group-text {
            border-color: var(--primary-color);
        }
        
        .status-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .status-dot.present {
            background-color:#a4d47f
        }
        
        .status-dot.absent {
            background-Color:#ce727e;
            

        }
        
        /* Dashboard cards */
        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 1.25rem;
            display: flex;
            flex-direction: column;
        }
        
        .stat-card .stat-icon {
            height: 40px;
            width: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .stat-card .stat-label {
            font-size: 0.875rem;
            color: var(--gray-600);
            margin-bottom: 0.25rem;
        }
        
        .stat-card .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0;
        }
        
        .stat-card .stat-trend {
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
        }
        
        .trend-up {
            color: var(--success-color);
        }
        
        .trend-down {
            color: var(--danger-color);
        }
        
        /* Tab navigation */
        .tab-navigation {
            display: flex;
            border-bottom: 1px solid var(--gray-200);
            margin-bottom: 1.5rem;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .tab-item {
            padding: 0.75rem 1.25rem;
            font-weight: 500;
            color: var(--gray-600);
            border-bottom: 2px solid transparent;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .tab-item.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }
        
        .tab-item:hover {
            color: var(--primary-color);
        }
        
        /* Responsive adjustments */
        @media (max-width: 991px) {
            .chart-card {
                margin-bottom: 1.5rem;
            }
        }
        
        @media (max-width: 767px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header-actions {
                margin-top: 1rem;
                width: 100%;
            }
            
            .header-actions .btn {
                width: 100%;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .attendance-summary {
                grid-template-columns: 1fr;
            }
        }
        
        /* Accessibility improvements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }
        
        :focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        
        .table-striped > tbody > tr:nth-of-type(odd) > * {
            background-color: #fafbfc;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-clipboard-check logo-icon"></i>
                <h1 class="page-title">View Student Attendance </h1>
            </div>
           
        </header>
        
        <!-- Dashboard Overview Stats -->
        <div class="dashboard-stats">
            <div class="stat-card">
                <div class="stat-icon" style="background-color: var(--primary-light); color: var(--primary-color);">
                    <i class="fas fa-users"></i>
                </div>
                <div class="stat-label">Total Students</div>
                <div class="stat-value">1800</div>
                <div class="stat-trend trend-up">
                    <i class="fas fa-arrow-up me-1"></i> 5.2% from last week
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background-color: var(--success-light); color: var(--success-color);">
                    <i class="fas fa-user-check"></i>
                </div>
                <div class="stat-label">Avg. Attendance</div>
                <div class="stat-value">87.5%</div>
                <div class="stat-trend trend-up">
                    <i class="fas fa-arrow-up me-1"></i> 2.1% from last week
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background-color: var(--danger-light); color: var(--danger-color);">
                    <i class="fas fa-user-times"></i>
                </div>
                <div class="stat-label">Absenty</div>
                <div class="stat-value">12.5%</div>
                <div class="stat-trend trend-down">
                    <i class="fas fa-arrow-down me-1"></i> 2.1% from last week
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon" style="background-color: #e6f2ff; color: #0073e6;">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="stat-label">Classes Today</div>
                <div class="stat-value">24</div>
                <div class="stat-trend">
                    Same as yesterday
                </div>
            </div>
        </div>
        
        <!-- Tab Navigation -->
        <div class="tab-navigation">
            <div class="tab-item active">Daily Attendance</div>
            <div class="tab-item">Weekly Reports</div>
            <div class="tab-item">Monthly Analysis</div>
            
            
        </div>
        
        <!-- Filter Card -->
        <div class="card">
            <div class="card-header">
                <i class="fas fa-filter card-header-icon"></i>
                Filter Options
            </div>
            <div class="card-body">
                <div class="filter-container">
                    <div class="row g-3">


                        <div class="col-md-3">
                            <label for="classSelect" class="form-label">Select Class</label>
                            <select id="classSelect" class="form-select">
                                <option value="">-- Select Class --</option>
                                <!-- Classes will be populated dynamically -->
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="batchSelect" class="form-label">Batch</label>
                            <select id="batchSelect" class="form-select">
                                <option value="">All Batches</option>
                                <option value="Batch 1">Batch 1</option>
                                <option value="Batch 2">Batch 2</option>
                                <option value="Batch 3">Batch 3</option>
                                <option value="Batch 4">Batch 4</option>
                                <option value="Batch 5">Batch 5</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="datePicker" class="form-label">Date</label>
                            <input type="date" id="datePicker" class="form-control" >
                        </div>
                        <div class="col-md-3">
                            <label for="timeSlot" class="form-label">Time Slot</label>
                            <select id="timeSlot" class="form-select">
                                <option value="">All Time Slots</option>
                                <option value="Morning">Morning</option>
                                <option value="Afternoon">Afternoon</option>
                                <option value="Evening">Evening</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row g-3">
            <!-- Chart Column -->
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">Attendance Visualization</div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="chartSelect" class="form-label">Select Chart Type</label>
                                <select id="chartSelect" class="form-select">
                                    <option value="pie">Pie Chart</option>
                                    
                                    
                                </select>
                            </div>
                           
                        </div>
                        
                        
                        
                        <div class="chart-container">
                            <canvas id="attendanceChart"></canvas>
                        </div>
                    </div>
                </div>





            </div>
            
            <!-- Summary Column -->
            <div class="col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-clipboard-list card-header-icon"></i>
                        Today's Summary
                    </div>
                    <div class="card-body">
                        <div class="attendance-summary">
                            <div class="attendance-card present-card">
                                <h3 id="presentCount">0</h3>
                                <p>Present</p>
                            </div>
                            <div class="attendance-card absent-card">
                                <h3 id="absentCount">0</h3>
                                <p>Absent</p>
                            </div>
                        </div>
                        <div class="attendance-stats">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>Attendance Rate</span>
                                <span id="attendanceRate" class="fw-bold">87.0%</span>
                            </div>
                            <div class="progress mb-3" style="height: 8px;">
                                <div id="attendanceProgress" class="progress-bar" role="progressbar" style="width: 87%;" aria-valuenow="87" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>Total Students</span>
                                <span id="totalStudents" class="fw-bold">100</span>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <span>Last Updated</span>
                                <span class="fw-bold text-unmuted">18 Mar, 10:30 AM</span>
                            </div>
                            <div class="d-grid mt-3">
                                <button class="btn btn-sm btn-primary">
                                    <i class="fas fa-sync-alt me-1"></i> Refresh Data
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Student List -->
        <div id="studentsList" class="card">
            <div class="card-header">
                <i class="fas fa-users card-header-icon"></i>
                <span id="studentListHeader">Student Attendance List</span>
                <span class="ms-2 badge bg-primary">Today</span>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap justify-content-between align-items-center mb-4">
                    <div class="search-container mb-2 mb-md-0">
                        <div class="input-group">
                            <span class="input-group-text bg-transparent border-end-0">
                                <i class="fas fa-search"></i>
                            </span>
                            <input type="text" class="form-control border-start-0" placeholder="Search students...">
                        </div>
                    </div>
                   
                </div>
                <div class="table-responsive">
                    <table class="table table-hover table-striped">
                        <thead>
                            <tr>
                                <th style="width: 30%">Student Name</th>
                                <th class="text-center">Morning</th>
                                <th class="text-center">Afternoon</th>
                                <th class="text-center">Evening</th>
                                <th class="text-center">Overall</th>
                                <th class="text-end">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">JS</div>
                                        <div>Bryan B Sewel</div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-end">
                                    <button>
                                        <a href="C:\Users\hp\Desktop\project\student.html" class="button-style"> <i class="fas fa-edit"></i></a>
                                       
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">EJ</div>
                                        <div>Emma Johnson</div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="absent-badge">
                                        <i class="fas fa-times badge-icon"></i> Absent
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-end">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="student-name">
                                        <div class="student-avatar">MC</div>
                                        <div>Michael Chen</div>
                                    </div>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="absent-badge">
                                        <i class="fas fa-times badge-icon"></i> Absent
                                    </span>
                                </td>
                                <td class="text-center">
                                    <span class="present-badge">
                                        <i class="fas fa-check badge-icon"></i> Present
                                    </span>
                                </td>
                                <td class="text-end">
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                    </div>
            </div></div>
    </div>
                                    <script>
                                        // Initialize the data structure
                                        const attendanceData = {
                                            // Generate classes from 1 to 12
                                            classes: Array.from({length: 12}, (_, i) => `Class ${i + 1}`),
                                            // Generate batches from 1 to 5
                                            batches: Array.from({length: 5}, (_, i) => `Batch ${i + 1}`),
                                            // Sample student data
                                            students: {}
                                        };
                                        
                                        // Generate student data for each class and batch
                                        function generateStudentData() {
                                            attendanceData.classes.forEach(className => {
                                                attendanceData.students[className] = {};
                                                
                                                attendanceData.batches.forEach(batchName => {
                                                    const studentList = [];
                                                    // Generate 10 students per batch
                                                    for (let i = 1; i <= 10; i++) {
                                                        studentList.push({
                                                            id: `${className.replace('Class ', '')}-${batchName.replace('Batch ', '')}-${i}`,
                                                            name: `Student ${i}`,
                                                            attendance: {
                                                                morning: Math.random() > 0.2,    // 80% chance of being present
                                                                afternoon: Math.random() > 0.3,  // 70% chance of being present
                                                                evening: Math.random() > 0.4     // 60% chance of being present
                                                            }
                                                        });
                                                    }
                                                    attendanceData.students[className][batchName] = studentList;
                                                });
                                            });
                                        }
                                        
                                        // Generate the initial data
                                        generateStudentData();
                                        
                                        // Global chart object
                                        let attendanceChart = null;
                                        
                                        // Initialize the page
                                        function initializePage() {
                                            // Populate class dropdown
                                            const classSelect = document.getElementById('classSelect');
                                            attendanceData.classes.forEach(className => {
                                                const option = document.createElement('option');
                                                option.value = className;
                                                option.textContent = className;
                                                classSelect.appendChild(option);
                                            });
                                            
                                            // Set up event listeners
                                            document.getElementById('chartSelect').addEventListener('change', updateChart);
                                            
                                            document.getElementById('classSelect').addEventListener('change', function() {
                                                const selectedClass = this.value;
                                                const batchSelect = document.getElementById('batchSelect');
                                                
                                                // Clear and disable batch dropdown if no class is selected
                                                batchSelect.innerHTML = '<option value="">-- Select Batch --</option>';
                                                
                                                if (!selectedClass) {
                                                    batchSelect.disabled = true;
                                                    hideStudentsList();
                                                    updateChart();
                                                    return;
                                                }
                                                
                                                // Enable and populate batch dropdown
                                                batchSelect.disabled = false;
                                                attendanceData.batches.forEach(batchName => {
                                                    const option = document.createElement('option');
                                                    option.value = batchName;
                                                    option.textContent = batchName;
                                                    batchSelect.appendChild(option);
                                                });
                                                
                                                updateChart();
                                            });
                                            
                                            document.getElementById('batchSelect').addEventListener('change', function() {
                                                const selectedBatch = this.value;
                                                const selectedClass = document.getElementById('classSelect').value;
                                                
                                                if (!selectedBatch || !selectedClass) {
                                                    hideStudentsList();
                                                    updateChart();
                                                    return;
                                                }
                                                
                                                populateStudentList(selectedClass, selectedBatch);
                                                updateChart();
                                            });
                                            
                                            // Initial chart update
                                            updateChart();
                                        }
                                        
                                        // Update the attendance chart
                                        function updateChart() {
                                            const chartType = document.getElementById('chartSelect').value;
                                            const selectedClass = document.getElementById('classSelect').value;
                                            const selectedBatch = document.getElementById('batchSelect').value;
                                            
                                            // Calculate attendance data
                                            let presentCount = 0;
                                            let absentCount = 0;
                                            
                                            if (selectedClass && selectedBatch) {
                                                // Get data for the specific class and batch
                                                const students = attendanceData.students[selectedClass][selectedBatch];
                                                
                                                students.forEach(student => {
                                                    // Count attendance for morning, afternoon, and evening
                                                    const totalSessions = 3;
                                                    let presentSessions = 0;
                                                    
                                                    if (student.attendance.morning) presentSessions++;
                                                    if (student.attendance.afternoon) presentSessions++;
                                                    if (student.attendance.evening) presentSessions++;
                                                    
                                                    presentCount += presentSessions;
                                                    absentCount += (totalSessions - presentSessions);
                                                });
                                            } else if (selectedClass) {
                                                // Get data for all batches in the selected class
                                                attendanceData.batches.forEach(batchName => {
                                                    const students = attendanceData.students[selectedClass][batchName];
                                                    
                                                    students.forEach(student => {
                                                        // Count attendance for morning, afternoon, and evening
                                                        const totalSessions = 3;
                                                        let presentSessions = 0;
                                                        
                                                        if (student.attendance.morning) presentSessions++;
                                                        if (student.attendance.afternoon) presentSessions++;
                                                        if (student.attendance.evening) presentSessions++;
                                                        
                                                        presentCount += presentSessions;
                                                        absentCount += (totalSessions - presentSessions);
                                                    });
                                                });
                                            } else {
                                                // Get data for all classes and batches
                                                attendanceData.classes.forEach(className => {
                                                    attendanceData.batches.forEach(batchName => {
                                                        const students = attendanceData.students[className][batchName];
                                                        
                                                        students.forEach(student => {
                                                            // Count attendance for morning, afternoon, and evening
                                                            const totalSessions = 3;
                                                            let presentSessions = 0;
                                                            
                                                            if (student.attendance.morning) presentSessions++;
                                                            if (student.attendance.afternoon) presentSessions++;
                                                            if (student.attendance.evening) presentSessions++;
                                                            
                                                            presentCount += presentSessions;
                                                            absentCount += (totalSessions - presentSessions);
                                                        });
                                                    });
                                                });
                                            }
                                            
                                            // Update attendance summary
                                            document.getElementById('presentCount').textContent = presentCount;
                                            document.getElementById('absentCount').textContent = absentCount;
                                            
                                            // Destroy previous chart if it exists
                                            if (attendanceChart) {
                                                attendanceChart.destroy();
                                            }
                                            
                                            // Create new chart
                                            const ctx = document.getElementById('attendanceChart').getContext('2d');
                                            
                                            switch (chartType) {
                                                case 'pie':
                                                    attendanceChart = new Chart(ctx, {
                                                        type: 'pie',
                                                        data: {
                                                            labels: ['Present', 'Absent'],
                                                            datasets: [{
                                                                data: [presentCount, absentCount],
            
                                                backgroundColor: ['#a4d47f','#dfba82'],
                                                                borderWidth: 1
                                                            }]
                                                        },
                                                        options: {
                                                            responsive: true,
                                                            maintainAspectRatio: false,
                                                            plugins: {
                                                                legend: {
                                                                    position: 'bottom'
                                                                },
                                                                title: {
                                                                    display: true,
                                                                    text: getChartTitle()
                                                                }
                                                            }
                                                        }
                                                    });
                                                    break;
                                                    
                                                
                                                                   
                                                    
                                       
                                                    
                                                }
                                        
                                        // Calculate attendance data for each time slot
                                        function calculateTimeSlotData(isPresent) {
                                            const selectedClass = document.getElementById('classSelect').value;
                                            const selectedBatch = document.getElementById('batchSelect').value;
                                            const result = [0, 0, 0]; // [morning, afternoon, evening]
                                            
                                            if (selectedClass && selectedBatch) {
                                                // Get data for the specific class and batch
                                                const students = attendanceData.students[selectedClass][selectedBatch];
                                                
                                                students.forEach(student => {
                                                    if (student.attendance.morning === isPresent) result[0]++;
                                                    if (student.attendance.afternoon === isPresent) result[1]++;
                                                    if (student.attendance.evening === isPresent) result[2]++;
                                                });
                                            } else if (selectedClass) {
                                                // Get data for all batches in the selected class
                                                attendanceData.batches.forEach(batchName => {
                                                    const students = attendanceData.students[selectedClass][batchName];
                                                    
                                                    students.forEach(student => {
                                                        if (student.attendance.morning === isPresent) result[0]++;
                                                        if (student.attendance.afternoon === isPresent) result[1]++;
                                                        if (student.attendance.evening === isPresent) result[2]++;
                                                    });
                                                });
                                            } else {
                                                // Get data for all classes and batches
                                                attendanceData.classes.forEach(className => {
                                                    attendanceData.batches.forEach(batchName => {
                                                        const students = attendanceData.students[className][batchName];
                                                        
                                                        students.forEach(student => {
                                                            if (student.attendance.morning === isPresent) result[0]++;
                                                            if (student.attendance.afternoon === isPresent) result[1]++;
                                                            if (student.attendance.evening === isPresent) result[2]++;
                                                        });
                                                    });
                                                });
                                            }
                                            
                                            return result;
                                        }
                                        
                                        // Get chart title based on selections
                                        function getChartTitle() {
                                            const selectedClass = document.getElementById('classSelect').value;
                                            const selectedBatch = document.getElementById('batchSelect').value;
                                            
                                            if (selectedClass && selectedBatch) {
                                                return `Attendance for ${selectedClass} - ${selectedBatch}`;
                                            } else if (selectedClass) {
                                                return `Attendance for ${selectedClass} - All Batches`;
                                            } else {
                                                return 'Overall Attendance';
                                            }
                                        }
                                    }
                                        
                                        // Populate student list based on selected class and batch
                                        function populateStudentList(className, batchName) {
                                            const studentTableBody = document.getElementById('studentTableBody');
                                            const studentListHeader = document.getElementById('studentListHeader');
                                            
                                            // Update header
                                            studentListHeader.textContent = `${className} - ${batchName} Attendance`;
                                            
                                            // Clear existing list
                                            studentTableBody.innerHTML = '';
                                            
                                            // Get students for the selected class and batch
                                            const students = attendanceData.students[className][batchName];
                                            
                                            // Create table rows for each student
                                            students.forEach(student => {
                                                const row = document.createElement('tr');
                                                
                                                const nameCell = document.createElement('td');
                                                nameCell.textContent = student.name;
                                                row.appendChild(nameCell);
                                                
                                                // Morning attendance
                                                const morningCell = document.createElement('td');
                                                morningCell.className = 'text-center';
                                                const morningStatus = document.createElement('div');
                                                morningStatus.className = student.attendance.morning ? 'present' : 'absent';
                                                morningStatus.textContent = student.attendance.morning ? 'Present' : 'Absent';
                                                morningCell.appendChild(morningStatus);
                                                row.appendChild(morningCell);
                                                
                                                // Afternoon attendance
                                                const afternoonCell = document.createElement('td');
                                                afternoonCell.className = 'text-center';
                                                const afternoonStatus = document.createElement('div');
                                                afternoonStatus.className = student.attendance.afternoon ? 'present' : 'absent';
                                                afternoonStatus.textContent = student.attendance.afternoon ? 'Present' : 'Absent';
                                                afternoonCell.appendChild(afternoonStatus);
                                                row.appendChild(afternoonCell);
                                                
                                                // Evening attendance
                                                const eveningCell = document.createElement('td');
                                                eveningCell.className = 'text-center';
                                                const eveningStatus = document.createElement('div');
                                                eveningStatus.className = student.attendance.evening ? 'present' : 'absent';
                                                eveningStatus.textContent = student.attendance.evening ? 'Present' : 'Absent';
                                                eveningCell.appendChild(eveningStatus);
                                                row.appendChild(eveningCell);
                                                
                                                studentTableBody.appendChild(row);
                                            });
                                            
                                            // Show students list
                                            document.getElementById('studentsList').style.display = 'block';
                                        }
                                        
                                        // Hide students list
                                        function hideStudentsList() {
                                            document.getElementById('studentsList').style.display = 'none';
                                        }
                                        
                                        // Initialize the page when the document is ready
                                        document.addEventListener('DOMContentLoaded', initializePage);
                                    </script>
</body></html>

                                    